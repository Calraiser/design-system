/*
 * @license
 * chartjs-plugin-deferred
 * http://chartjs.org/
 * Version: 1.0.1
 *
 * Copyright 2018 Simon Brunel
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-deferred/blob/master/LICENSE.md
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],t):t(e.Chart)}(this,function(e){"use strict";function t(e,t){t?window.setTimeout(e,t):d.requestAnimFrame.call(window,e)}function n(e,t){var n=parseInt(e,10);return isNaN(n)?0:"string"==typeof e&&-1!==e.indexOf("%")?n/100*t:n}function r(e){var t=e[l].options,r=e.chart.canvas;if(!r||null===r.offsetParent)return!1;var a=r.getBoundingClientRect(),o=n(t.yOffset||0,a.height),i=n(t.xOffset||0,a.width);return 0<=a.right-i&&0<=a.bottom-o&&a.left+i<=window.innerWidth&&a.top+o<=window.innerHeight}function a(e){var n=e.target[f];n.ticking||(n.ticking=!0,t(function(){var e,t,a=n.charts.slice(),o=a.length;for(t=0;t<o;++t)r(e=a[t])&&(i(e),e[l].appeared=!0,e.update());n.ticking=!1}))}function o(e){if(e.nodeType===Node.ELEMENT_NODE){var t=d.getStyle(e,"overflow-x"),n=d.getStyle(e,"overflow-y");return"auto"===t||"scroll"===t||"auto"===n||"scroll"===n}return e.nodeType===Node.DOCUMENT_NODE}function i(e){e[l].elements.forEach(function(t){var n=t[f].charts;n.splice(n.indexOf(e),1),n.length||(d.removeEvent(t,"scroll",a),delete t[f])}),e[l].elements=[]}var d=(e=e&&e.hasOwnProperty("default")?e["default"]:e).helpers,f="$chartjs_deferred",l="$deferred";e.defaults.global.plugins.deferred={xOffset:0,yOffset:0,delay:0},e.plugins.register({id:"deferred",beforeInit:function(e,t){e[l]={options:t,appeared:!1,delayed:!1,loaded:!1,elements:[]},function(e){for(var t,n,r=e.chart.canvas.parentElement;r;)o(r)&&(0===(n=(t=r[f]||(r[f]={})).charts||(t.charts=[])).length&&d.addEvent(r,"scroll",a),n.push(e),e[l].elements.push(r)),r=r.parentElement||r.ownerDocument}(e)},beforeDatasetsUpdate:function(e,n){var a=e[l];if(!a.loaded){if(!a.appeared&&!r(e))return!1;if(a.appeared=!0,a.loaded=!0,i(e),0<n.delay)return a.delayed=!0,t(function(){a.delayed=!1,e.update()},n.delay),!1}if(a.delayed)return!1},destroy:function(e){i(e)}})});