$(function(){function e(e){t?e():$.getJSON("/search.json",function(a){t=lunr.Index.load(a.index),s=a.map,e()})}function a(a){e(function(){var e=t.search(a);$(".searchbar .content-search .result").remove(),e.length>0?(o=e.length,c=0,e.forEach(function(e,a){var r=$('<div class="result"/>'),t=$('<a href ="'+e.ref+'">').appendTo(r);t.append('<h3 class="title">'+(a+1)+". "+s[e.ref].page_title+"</h3>"),t.append('<p class="description">'+s[e.ref].description+"</p>"),r.mouseover(function(){c=$(".searchbar .content-search .result").index(this),n()}),r.appendTo(".searchbar .content-search")}),n()):$('<div class="result"/>').html("No results found...").appendTo(".searchbar .content-search"),$(".searchbar").show()})}function n(){var e=$(".searchbar .content-search .result");e.removeClass("active"),$(e.get(c)).addClass("active")}function r(){var e=$($(".searchbar .content-search .result").get(c)).find("a").attr("href");e&&(window.location=e)}var t=null,s=null,c=null,o=null;$(".searchbar").hide(),$(".search").keyup(function(e){var t=$(this).val();40==e.keyCode?(c++,c>=o&&(c=0),n()):38==e.keyCode?(c--,0>c&&(c=o-1),n()):13==e.keyCode?r():27==e.keyCode?$(".searchbar").hide():t.length>0?a(t):$(".searchbar").hide()}).focus()});